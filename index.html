<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Quiz Fluxograma - Local</title>
<style>
  :root{--bg:#1e1e2f;--card:#2c2c3c;--accent:#ffeb3b}
  body{margin:16px;font-family:Arial,sans-serif;background:var(--bg);color:#fff}
  h1{text-align:center;color:var(--accent);margin-bottom:18px}
  #userNameDiv{text-align:center;margin-bottom:16px}
  #userName{padding:8px 12px;border-radius:6px;border:none;margin-right:8px;width:200px}
  button{padding:8px 12px;margin:4px;border:none;border-radius:6px;background:#1976d2;color:#fff;cursor:pointer}
  button:disabled{opacity:.6;cursor:default}
  .container{display:flex;justify-content:center;align-items:flex-start;gap:20px}
  .flowchart{width:360px;position:relative;border-radius:8px;padding:14px;background:var(--card);min-height:1250px}
  .step{position:absolute;width:140px;display:flex;flex-direction:column;align-items:center;left:110px}
  .symbol{width:140px;height:60px;display:flex;align-items:center;justify-content:center;font-weight:700;border-radius:10px;color:#fff;cursor:pointer;transition:transform .18s,box-shadow .18s,outline .15s;position:relative}
  .symbol:hover{transform:translateY(-3px)}
  .symbol.highlight{box-shadow:0 0 0 6px rgba(255,235,59,0.08)}
  .symbol.correct{outline:4px solid rgba(76,175,80,0.45)}
  .symbol.incorrect{outline:4px solid rgba(244,67,54,0.45)}
  /* Hints */
  .symbol::after{content:attr(data-hint);position:absolute;bottom:110%;left:50%;transform:translateX(-50%);background:rgba(0,0,0,0.85);color:#fff;padding:8px;border-radius:6px;font-size:13px;width:180px;text-align:center;opacity:0;pointer-events:none;transition:opacity .3s}
  .symbol:hover::after{opacity:1}
  /* Formatos */
  .symbol.startend{background:#ff9800;border-radius:36px}
  .symbol.input{background:#f06292;clip-path:polygon(15% 0,100% 0,85% 100%,0% 100%)}
  .symbol.process{background:#42a5f5}
  .symbol.decision{background:#66bb6a;clip-path:polygon(50% 0,100% 50%,50% 100%,0% 50%)}
  .symbol.document{background:#ffe082;color:#000;border-radius:6px 6px 16px 6px}
  .symbol.database{background:linear-gradient(180deg,#9575cd,#7e57c2);border-radius:50%/20%;height:70px;width:140px;position:relative}
  .symbol.database::before{content:"";position:absolute;left:10px;right:10px;top:-12px;height:18px;border-radius:50%;background:rgba(255,255,255,0.12)}
  .symbol.database::after{content:"";position:absolute;left:10px;right:10px;bottom:-12px;height:18px;border-radius:50%;background:rgba(0,0,0,0.12)}
  .symbol.subprocesso{background:#ff7043;border-radius:10px;position:relative;padding:4px 6px}
  .symbol.subprocesso::after{content:"";position:absolute;inset:6px;border:2px solid rgba(255,255,255,0.18);border-radius:6px}
  .symbol.conector{background:#9ccc65;border-radius:50%;width:60px;height:60px;display:flex;align-items:center;justify-content:center;font-weight:800;color:#092400}
  .symbol.preparacao{background:#26c6da;clip-path:polygon(25% 0%,75% 0%,100% 50%,75% 100%,25% 100%,0% 50%)}
  .arrow{width:4px;height:60px;margin-top:8px;background:#fff;transform:scaleY(0);transform-origin:top;transition:transform .35s,background .2s,opacity .2s;opacity:.25;border-radius:2px}
  .arrow.active{transform:scaleY(1);background:var(--accent);opacity:1}
  #question-area{width:320px;background:rgba(0,0,0,0.55);padding:16px;border-radius:10px}
  .question-box{display:none;margin-bottom:16px}
  .question-box p{margin-bottom:12px;font-size:16px}
  .question-box .answer{display:inline-block;padding:8px 14px;margin:6px;border-radius:8px;border:none;background:#1976d2;color:#fff;cursor:pointer}
  .question-box .answer:disabled{opacity:.6;cursor:default}
  .feedback{margin-top:10px;font-weight:700;font-size:15px}
  .final{background:linear-gradient(90deg,#263238,#37474f);padding:18px;border-radius:10px;text-align:center;margin-top:20px}
  #ranking{margin-top:10px;text-align:center}
  #score{font-weight:600;margin:10px 0}
  @media(max-width:900px){.container{flex-direction:column;align-items:center}.flowchart{width:90%;min-height:1200px}}
</style>
</head>
<body>

<h1>Quiz do Fluxograma ‚Äî Local</h1>

<div id="userNameDiv">
  <input type="text" id="userName" placeholder="Digite seu nome">
  <button id="btnStartQuiz">Iniciar Quiz</button>
  <p id="nameError" style="color:#ff8a80;"></p>
</div>

<div id="quizContainer" style="display:none">
  <div id="score">Pontua√ß√£o: 0</div>
  <div class="container">
    <div class="flowchart">
      <div class="step" data-id="inicio" style="top:10px;left:110px">
        <div class="symbol startend" data-hint="In√≠cio/Fim: indica o come√ßo ou t√©rmino do processo.">In√≠cio</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="entrada" style="top:120px;left:110px">
        <div class="symbol input" data-hint="Entrada/Sa√≠da: usado para representar dados que entram ou saem.">Entrada</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="processo" style="top:240px;left:110px">
        <div class="symbol process" data-hint="Processo: representa uma a√ß√£o ou tarefa.">Processo</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="decisao" style="top:360px;left:110px">
        <div class="symbol decision" data-hint="Decis√£o: indica um ponto de escolha (sim/n√£o, verdadeiro/falso).">Decis√£o</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="documento" style="top:480px;left:110px">
        <div class="symbol document" data-hint="Documento: mostra um registro ou relat√≥rio gerado.">Documento</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="db" style="top:600px;left:110px">
        <div class="symbol database" data-hint="Banco de Dados: indica armazenamento permanente de dados.">Banco</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="subprocesso" style="top:720px;left:110px">
        <div class="symbol subprocesso" data-hint="Subprocesso: chama outro processo dentro do principal.">Subprocesso</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="conector" style="top:840px;left:125px">
        <div class="symbol conector" data-hint="Conector: liga partes diferentes do fluxograma.">C</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="preparacao" style="top:960px;left:110px">
        <div class="symbol preparacao" data-hint="Prepara√ß√£o: indica a inicializa√ß√£o de algo (configura√ß√£o).">Prepara√ß√£o</div><div class="arrow"></div>
      </div>
      <div class="step" data-id="fim" style="top:1080px;left:110px">
        <div class="symbol startend" data-hint="Fim: encerra o processo.">Fim</div>
      </div>
    </div>

    <div id="question-area">
      <!-- Perguntas (iguais ao anterior, sem mudan√ßas) -->
      <div class="question-box" id="q1"><p>Qual s√≠mbolo representa <strong>entrada/sa√≠da</strong>?</p>
        <button class="answer" onclick="checkAnswer('q1','paralelogramo', this)">Paralelogramo</button>
        <button class="answer" onclick="checkAnswer('q1','losango', this)">Losango</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q2"><p>Qual s√≠mbolo √© usado para um <strong>processo</strong>?</p>
        <button class="answer" onclick="checkAnswer('q2','retangulo', this)">Ret√¢ngulo</button>
        <button class="answer" onclick="checkAnswer('q2','circulo', this)">C√≠rculo</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q3"><p>Qual s√≠mbolo representa uma <strong>decis√£o</strong>?</p>
        <button class="answer" onclick="checkAnswer('q3','losango', this)">Losango</button>
        <button class="answer" onclick="checkAnswer('q3','elipse', this)">Elipse</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q4"><p>Qual s√≠mbolo indica um <strong>documento</strong>?</p>
        <button class="answer" onclick="checkAnswer('q4','documento', this)">Documento</button>
        <button class="answer" onclick="checkAnswer('q4','processo', this)">Processo</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q5"><p>Qual s√≠mbolo indica um <strong>banco de dados</strong>?</p>
        <button class="answer" onclick="checkAnswer('q5','cilindro', this)">Cilindro</button>
        <button class="answer" onclick="checkAnswer('q5','losango', this)">Losango</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q6"><p>Qual s√≠mbolo indica um <strong>subprocesso</strong>?</p>
        <button class="answer" onclick="checkAnswer('q6','retangulo-duplo', this)">Ret√¢ngulo duplo</button>
        <button class="answer" onclick="checkAnswer('q6','paralelogramo', this)">Paralelogramo</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q7"><p>Qual s√≠mbolo √© usado como <strong>conector</strong>?</p>
        <button class="answer" onclick="checkAnswer('q7','circulo', this)">C√≠rculo</button>
        <button class="answer" onclick="checkAnswer('q7','losango', this)">Losango</button>
        <div class="feedback"></div></div>
      <div class="question-box" id="q8"><p>Qual s√≠mbolo √© usado para <strong>prepara√ß√£o</strong>?</p>
        <button class="answer" onclick="checkAnswer('q8','hexagono', this)">Hex√°gono</button>
        <button class="answer" onclick="checkAnswer('q8','retangulo', this)">Ret√¢ngulo</button>
        <div class="feedback"></div></div>
      <div class="question-box final" id="finalBox"><h3>üéâ Fim do Quiz</h3><p id="finalScore"></p><div id="ranking"></div></div>
    </div>
  </div>
</div>

<script>
  let userName="",score=0,currentStep=0,startTime=0;
  const steps=["inicio","entrada","processo","decisao","documento","db","subprocesso","conector","preparacao","fim"];
  const stepQuestions={entrada:"q1",processo:"q2",decisao:"q3",documento:"q4",db:"q5",subprocesso:"q6",conector:"q7",preparacao:"q8"};
  const correct={q1:"paralelogramo",q2:"retangulo",q3:"losango",q4:"documento",q5:"cilindro",q6:"retangulo-duplo",q7:"circulo",q8:"hexagono"};
  let localRanking=JSON.parse(localStorage.getItem("quizRanking")||"[]");

  function updateScore(){document.getElementById("score").innerText="Pontua√ß√£o: "+score;}
  function startFlow(){currentStep=1;startTime=new Date().getTime();nextStep();}
  function nextStep(){
    document.querySelectorAll(".symbol").forEach(s=>s.classList.remove("highlight","correct","incorrect"));
    document.querySelectorAll(".arrow").forEach(a=>a.classList.remove("active"));
    document.querySelectorAll(".question-box").forEach(q=>q.style.display="none");
    if(currentStep>=steps.length){showFinal();return;}
    const stepId=steps[currentStep];
    const stepEl=document.querySelector(`.step[data-id='${stepId}'] .symbol`);
    const arrowEl=document.querySelector(`.step[data-id='${stepId}'] .arrow`);
    if(stepEl) stepEl.classList.add("highlight");
    if(arrowEl) arrowEl.classList.add("active");
    if(stepQuestions[stepId]){
      const qBox=document.getElementById(stepQuestions[stepId]);
      qBox.style.display="block";
      qBox.querySelectorAll("button").forEach(b=>b.disabled=false);
      qBox.querySelector(".feedback").innerText="";
    }
    currentStep++;
  }
  function checkAnswer(qId,ans,btn){
    const correctAns=correct[qId];
    const qBox=document.getElementById(qId);
    qBox.querySelectorAll("button").forEach(b=>b.disabled=true);
    const feedback=qBox.querySelector(".feedback");
    const stepId=Object.keys(stepQuestions).find(k=>stepQuestions[k]===qId);
    const symbol=document.querySelector(`.step[data-id='${stepId}'] .symbol`);
    if(ans===correctAns){score++;updateScore();feedback.innerText="‚úÖ Correto!";symbol.classList.add("correct");}
    else{feedback.innerText="‚ùå Incorreto!";symbol.classList.add("incorrect");}
    setTimeout(()=>{qBox.style.display="none";nextStep();},500);
  }
  function showFinal(){
    const total=Object.keys(correct).length;
    document.getElementById("finalScore").innerText=`${userName}, sua pontua√ß√£o: ${score} de ${total}`;
    document.getElementById("finalBox").style.display="block";
    const endTime=new Date().getTime();
    const duration=Math.floor((endTime-startTime)/1000);
    localRanking.push({nome:userName,pontuacao:score,tempo:duration});
    localRanking.sort((a,b)=>b.pontuacao-a.pontuacao);
    localStorage.setItem("quizRanking",JSON.stringify(localRanking));
    document.getElementById("ranking").innerHTML="<strong>üèÜ Ranking Local</strong><br>"+localRanking.slice(0,10).map(d=>`${d.nome}: ${d.pontuacao} pts`).join("<br>");
  }
  document.getElementById("btnStartQuiz").addEventListener("click",()=>{
    const input=document.getElementById("userName").value.trim();
    if(!input){document.getElementById("nameError").innerText="Digite seu nome!";return;}
    userName=input;
    document.getElementById("userNameDiv").style.display="none";
    document.getElementById("quizContainer").style.display="block";
    startFlow();
  });
</script>
</body>
</html>
